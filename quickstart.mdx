---
title: Quickstart Guide
description: "Get started with PeerDB in a few simple steps."
---

### Deploying PeerDB

We currently support deploying and testing PeerDB using our Docker Compose file, support for Kubernetes and other means of deployment are in development.

<Info> Docker can be installed by referring to [these instructions](https://www.docker.com/products/docker-desktop). The `docker compose` tool should also be present. The Postgres client tools (specifically `psql`) are used to test the PeerDB installation. </Info>

1.  **Run the following commands in your terminal:**

    ```bash
    git clone --recursive git@github.com:PeerDB-io/peerdb.git
    cd peerdb
    
    # Run docker containers: peerdb-server, postgres as catalog, temporal
    export COMPOSE_PROJECT_NAME=peerdb-stack
    docker compose up
    ```

3.  **Connect to PeerDB:**


    ```bash
    psql "port=9900 host=localhost password=peerdb"
    ```

That's it! You now have PeerDB up and running on your machine, ready to query away!

### Quickstart

<Info> The following steps assume you have PeerDB running locally. We also need the Postgres client tools (specifically `psql` and `pgbench`) installed and available on your PATH. </Info>

#### Create a Peer

With PeerDB running, we can create our first peers.

This script reuses the PeerDB internal Postgres instance to setup two databases, which we can use to create two peers. It also creates some tables on both databases to use later in the quickstart. Run the following commands in your terminal:

    ```bash
    curl -O https://peerdb-sample-data.s3.us-east-2.amazonaws.com/quickstart_prepare_peers.sh
    chmod +x quickstart_prepare_peers.sh
    ./quickstart_prepare_peers.sh
    ```


We can now create the peers by pasting the following commands into `psql` after connecting to PeerDB by running `psql "port=9900 host=localhost password=peerdb"` in your terminal.


    ```sql
    CREATE PEER source FROM POSTGRES WITH
    (
        host = 'catalog',
        port = '5432',
        user = 'postgres',
        password = 'postgres',
        database = 'source'
    );
    ```

    ```sql
    CREATE PEER target FROM POSTGRES WITH
    (
        host = 'catalog',
        port = '5432',
        user = 'postgres',
        password = 'postgres',
        database = 'target'
    );
    ```

#### Creating mirrors

One of the core features of PeerDB is moving data between tables, either directly or after transformation. We do this via two types of mirrors: `CDC` and `QRep`. The former is used to move data from source tables to identical destination tables, while the latter is used to move the results from a query on the source to a destination table.

Run the following SQL commands to set up a CDC mirror and QRep mirror between our two posts.

    ```sql
    --- CDC mirrors automatically create the destination table
    CREATE MIRROR cdc_mirror FROM source TO target WITH TABLE MAPPING (public.source:public.target_cdc);
    ```

    ```sql
    --- QRep mirrors require the destination table to be created beforehand, which we did in the previous step.
    CREATE MIRROR qrep_mirror FROM source TO target
    FOR $$SELECT id, c1+c2 AS c12, right(t, 7) AS st FROM source WHERE id >= {{.start}} AND id < {{.end}}$$ WITH (
        watermark_table_name='public.source',
        watermark_column='id',
        destination_table_name='public.target_qrep',
        mode='append',
        parallelism=2,
        batch_size_int=50000,
        refresh_interval=10
    );
    --- 'append' mode indicates that the records in the source table are write-once and never updated. 
    ```

Now that we have our mirrors set up, they will automatically replicate data from the source table. Let's insert a row in the source table via PeerDB itself.

    ```sql
    --- Verify that the source table has zero rows
    SELECT * FROM source.public.source;
    --- Insert a row into the source table
    INSERT INTO source.public.source(c1, c2, t) VALUES(1, 2, 'oathbringer');
    ```

With a few seconds, the row should be replicated to both the target tables. Let's verify this by running the following commands:

    ```sql
    --- CDC mirrors replicate data as-is, so the row should be identical.
    SELECT * FROM target.public.target_cdc;
    --- QRep mirrors replicate the results of the query, so the row should be transformed.
    SELECT * FROM target.public.target_qrep;
    ```

The output should look like this:

    ```bash
    peerdb=> SELECT * FROM target.public.target_cdc;
    c1 | c2 | id |      t
    ----+----+----+-------------
    1 |  2 |  1 | oathbringer
    (1 row)

    peerdb=> SELECT * FROM target.public.target_qrep;
    id | c12 |   st
    ----+-----+---------
    1 |   3 | bringer
    (1 row)
    ```

### FAQ

If you have any questions about the PeerDB setup and deployment process, don't hesitate to reach out on [Slack](https://join.slack.com/t/peerdb-public/shared_invite/zt-1wo9jydev-EXInbMtCtpAKFFWdi7QvLQ). We're more than happy to assist and answer any questions, including:

*   How long does it take to set up PeerDB?
*   How do I know my data sync is successful?
*   Can I set a specific time to start my data sync?

If there are any unanswered questions, we'd love to help you get started. Feel free to ask your questions on our community [Slack](https://join.slack.com/t/peerdb-public/shared_invite/zt-1wo9jydev-EXInbMtCtpAKFFWdi7QvLQ) channel.

In addition to this, if you require direct access to our team for any assistance, don't hesitate to contact us to discuss our premium support offerings.
