---
title: "PubSub Setup Guide"
---

1. [Create a dedicated Service Account](https://cloud.google.com/iam/docs/keys-create-delete#iam-service-account-keys-create-console) 
for PeerDB through Google Cloud Console and specify the following roles:
- `Pub/Sub Viewer` : PeerDB requires this role to check if your provided topic exists.
- `Pub/Sub Publisher` : PeerDB requires this role to publish messages to the topic.

   <Frame caption="Create a dedicated Service Account For PeerDB and grant the necessary permissions">
    <img src="/images/setup/pubsub-setup.png" />
   </Frame>

2. Add a key to the above created service account
   <Frame caption="Add Key to the Service Account">
    <img src="/images/setup/bq-add-key-1.png" />
   </Frame>
   <Frame caption="Key Added to the Service Account">
    <img src="/images/setup/bq-add-key-2.png" />
   </Frame>

3. Using this service account key create the peer using PeerDB UI

   <Frame caption="Create PubSub Peer">
    <img src="/images/setup/pubsub-create-peer.png" />
   </Frame>
----

### Topic creation
By default, you would need to create the destination topic in PubSub before creating a mirror.
However, if you'd like PeerDB to create the topic for you, you can turn on the following setting in PeerDB UI:
   <Frame caption="Add Key to the Service Account">
    <img src="/images/cdc_kafka/topiccreate.png" />
   </Frame>

Note that you must create a subscription on the topic for messages to be retained.